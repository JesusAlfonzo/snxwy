---
import { Image } from "astro:assets";
export interface Props {
  title: string;
  subtitle: string;
  href?: string;
  image?: string;
  bgColor?: string;
  width?: number;
  height?: number;
  blocked?: boolean;
}
const {
  title,
  subtitle,
  href = "#",
  image,
  bgColor = "bg-black/90",
  width = 305,
  height = 305,
  blocked = false,
} = Astro.props;
let bgImage = null;
if (image) {
  try {
    const imageModule = await import(`../../assets/images/${image}`);
    bgImage = imageModule.default;
  } catch (e) {
    console.warn(`Image ${image} not found, using solid background`);
  }
}
---

{
  blocked ? (
    <div class="block w-full max-w-sm">
      <div class="relative rounded-xl shadow-lg transition-all duration-300 mb-1 w-full aspect-square cursor-not-allowed opacity-75">
        <div class="absolute inset-0 bg-black/90 transition-all duration-300">
          {bgImage && (
            <Image
              src={bgImage}
              alt="Background"
              class="absolute inset-0 w-full h-full object-cover blur-sm transition-opacity duration-300 opacity-30"
              style="filter: blur(8px) saturate(0.5) hue-rotate(-10deg) brightness(0.8) contrast(1.2);"
            />
          )}
          <div class="absolute inset-0 bg-red-900/40 backdrop-blur-sm" />
        </div>

        <div class="relative z-10 flex flex-col items-center justify-center h-full p-4 sm:p-6 text-center">
          <div class="w-8 h-8 sm:w-10 sm:h-10 border-2 border-red-500 rounded-full mb-3 flex items-center justify-center">
            <div class="w-2 h-2 sm:w-3 sm:h-3 bg-red-500 rounded-full" />
          </div>
          <h3 class="text-lg sm:text-xl lg:text-2xl font-bold text-red-300 mb-2">
            {title}
          </h3>
          <p class="text-xs sm:text-sm text-red-400">{subtitle}</p>
        </div>
      </div>
    </div>
  ) : (
    <a href={href} class="block w-full max-w-sm">
      <div class="relative rounded-xl shadow-lg transition-all duration-300 mb-1 hover:scale-[1.02] group cursor-pointer w-full aspect-square">
        <div class={`absolute inset-0 ${bgColor} transition-all duration-300`}>
          {bgImage && (
            <Image
              src={bgImage}
              alt="Background"
              class="absolute inset-0 w-full h-full object-cover blur-xs opacity-0 group-hover:opacity-100 transition-opacity duration-300"
            />
          )}
        </div>

        <div class="relative z-10 flex flex-col items-center justify-center h-full p-4 sm:p-6 text-center">
          <h3 class="text-lg sm:text-xl lg:text-2xl font-bold text-white mb-2">
            {title}
          </h3>
          <p class="text-xs sm:text-sm text-neutral-300">{subtitle}</p>
        </div>
      </div>
    </a>
  )
}
